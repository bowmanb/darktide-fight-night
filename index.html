<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fight Night - Asheron's Call Darktide</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #1a1a1a;
            color: #ccc;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        #player-container {
            margin-top: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            width: 800px;
            height: 600px;
            position: relative;
            background-color: #000;
        }

        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            background: #222;
        }

        #start-button {
            padding: 15px 40px;
            font-size: 24px;
            background: #8b0000;
            color: white;
            border: 2px solid #ff4444;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.2s;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }

        #start-button:hover {
            background: #a00000;
            transform: scale(1.05);
        }

        /* Debug Button Styles */
        #debug-controls {
            margin-top: 10px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 800px;
        }

        .debug-btn {
            background: #444;
            color: #ddd;
            border: 1px solid #666;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .debug-btn:hover {
            background: #555;
        }

        #info-container {
            max-width: 800px;
            margin: 20px;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
            line-height: 1.6;
        }

        h1 {
            color: #fff;
            margin-top: 0;
        }

        p {
            margin-bottom: 1em;
        }

        strong {
            color: #fff;
        }
    </style>
</head>

<body>
    <div id="player-container">
        <div id="overlay">
            <button id="start-button">Enter Fight Night</button>
        </div>
    </div>

    <!-- Debug Controls -->
    <div id="debug-controls">
        <button id="log-status-btn" class="debug-btn">Log Status</button>
        <button id="play-btn" class="debug-btn">Play()</button>
        <button id="next-frame-btn" class="debug-btn">Next Frame (+1)</button>
        <button id="frame-10-btn" class="debug-btn">Goto Frame 10</button>
        <button id="frame-50-btn" class="debug-btn">Goto Frame 50</button>
    </div>

    <div id="info-container">
        <h1>Asheron's Call - Darktide Fight Night</h1>
        <p>
            This Flash file is a preserved artifact from the community of <strong>Asheron's Call</strong>, specifically
            the <strong>Darktide</strong> server.
        </p>
        <p>
            Darktide was unique among Asheron's Call servers as a dedicated PvP (Player vs Player) environment. Unlike
            the PvE servers, Darktide allowed players to attack each other almost anywhere in the game world, with full
            loot drop mechanics upon death. This created a harsh, competitive, and highly political atmosphere.
        </p>
        <p>
            "Fight Nights" were often community-organized events where players and guilds (allegiances) would gather to
            settle scores, hold tournaments, or simply engage in chaotic free-for-all combat. These events were a staple
            of the server's culture, often recorded and shared by players.
        </p>
    </div>

    <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
    <script>
        window.RufflePlayer = window.RufflePlayer || {};
        window.addEventListener("load", (event) => {
            const ruffle = window.RufflePlayer.newest();
            const player = ruffle.createPlayer();
            const container = document.getElementById("player-container");
            const overlay = document.getElementById("overlay");
            const btn = document.getElementById("start-button");

            player.style.width = "100%";
            player.style.height = "100%";

            btn.addEventListener("click", () => {
                console.log("Start button clicked");
                overlay.style.display = "none";
                container.appendChild(player);

                player.load({
                    url: "fightnight.swf",
                    allowScriptAccess: "always",
                    allowNetworking: "all",
                    wmode: "window",
                    autoplay: "on",
                    unmuteOverlay: "hidden",
                    backgroundColor: "#000000",
                    letterbox: "on",
                    logLevel: "warn",
                });
            });

            // Debug logic
            const bindBtn = (id, fn) => {
                document.getElementById(id).addEventListener("click", fn);
            };

            bindBtn("log-status-btn", () => {
                console.log("--- Player Status ---");
                // Try various potential properties
                try { console.log("CurrentFrame:", player.CurrentFrame ? player.CurrentFrame() : "N/A"); } catch (e) { console.log("CurrentFrame err", e); }
                try { console.log("TotalFrames:", player.TotalFrames ? player.TotalFrames() : "N/A"); } catch (e) { console.log("TotalFrames err", e); }
                try { console.log("IsPlaying:", player.IsPlaying ? player.IsPlaying() : "N/A"); } catch (e) { console.log("IsPlaying err", e); }
                console.log("Player object keys:", Object.keys(player));
                console.log("---------------------");
            });

            bindBtn("play-btn", () => {
                console.log("Call Play()");
                if (player.Play) player.Play();
                if (player.play) player.play();
            });

            bindBtn("next-frame-btn", () => {
                console.log("Call NextFrame()");
                // Ruffle might not expose NextFrame directly, used TCallLabel or similar in ancient times
                // Or just Play() is the only standard one. 
                // Let's try to get current frame and +1
                try {
                    const cur = player.CurrentFrame();
                    console.log("Current frame:", cur);
                    player.GotoFrame(cur + 1);
                } catch (e) {
                    console.log("NextFrame logic failed:", e);
                }
            });

            bindBtn("frame-10-btn", () => {
                console.log("Goto Frame 10");
                try { player.GotoFrame(10); } catch (e) { console.error(e); }
            });

            bindBtn("frame-50-btn", () => {
                console.log("Goto Frame 50");
                try { player.GotoFrame(50); } catch (e) { console.error(e); }
            });
        });
    </script>
</body>

</html>